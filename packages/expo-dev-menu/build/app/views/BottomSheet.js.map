{"version":3,"file":"BottomSheet.js","sourceRoot":"","sources":["../../../src/app/views/BottomSheet.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Dimensions,\n  Platform,\n  View,\n  LayoutChangeEvent,\n  ScrollView,\n  Text,\n  ScrollViewProps,\n} from 'react-native';\nimport {\n  NativeViewGestureHandler,\n  PanGestureHandler,\n  TapGestureHandler,\n  State as GestureState,\n} from 'react-native-gesture-handler';\nimport Animated from 'react-native-reanimated';\n\ntype Props = {\n  /**\n   * Points for snapping of bottom sheet component. They define distance from bottom of the screen.\n   * Might be number or percent (as string e.g. '20%') for points or percents of screen height from bottom.\n   */\n  snapPoints: (number | string)[];\n\n  /**\n   * Determines initial snap point of bottom sheet. Defaults to 0.\n   */\n  initialSnap: number;\n\n  /**\n   * Method for rendering scrollable content of bottom sheet.\n   */\n  renderContent?: () => React.ReactNode;\n\n  /**\n   * Method for rendering non-scrollable header of bottom sheet.\n   */\n  renderHeader?: () => React.ReactNode;\n\n  /**\n   * Defines if bottom sheet could be scrollable by gesture. Defaults to true.\n   */\n  enabledGestureInteraction?: boolean;\n  enabledHeaderGestureInteraction?: boolean;\n  enabledContentGestureInteraction?: boolean;\n\n  /**\n   * Defines if bottom sheet content responds to taps. Defaults to true.\n   */\n  enabledContentTapInteraction?: boolean;\n\n  /**\n   * When true, clamp bottom position to first snapPoint.\n   */\n  enabledBottomClamp?: boolean;\n\n  /**\n   * When true, sheet will grows up from bottom to initial snapPoint.\n   */\n  enabledBottomInitialAnimation?: boolean;\n\n  /**\n   * If false blocks snapping using snapTo method. Defaults to true.\n   */\n  enabledManualSnapping?: boolean;\n\n  /**\n   * Defines whether it's possible to scroll inner content of bottom sheet. Defaults to true.\n   */\n  enabledInnerScrolling?: boolean;\n\n  /**\n   * Reanimated node which holds position of bottom sheet, where 1 it the highest snap point and 0 is the lowest.\n   */\n  callbackNode?: Animated.Value<number>;\n\n  /**\n   * Reanimated node which holds position of bottom sheet;s content (in dp).\n   */\n  contentPosition?: Animated.Value<number>;\n\n  /**\n   * Reanimated node which holds position of bottom sheet's header (in dp).\n   */\n  headerPosition?: Animated.Value<number>;\n\n  /**\n   * Defines how violently sheet has to stopped while overdragging. 0 means no overdrag. Defaults to 0.\n   */\n  overdragResistanceFactor: number;\n\n  /**\n   * Overrides config for spring animation\n   */\n  springConfig: {\n    damping?: number;\n    mass?: number;\n    stiffness?: number;\n    restSpeedThreshold?: number;\n    restDisplacementThreshold?: number;\n    toss?: number;\n  };\n\n  /**\n   * Refs for gesture handlers used for building bottomsheet\n   */\n  innerGestureHandlerRefs: [\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<PanGestureHandler>,\n    React.RefObject<TapGestureHandler>\n  ];\n\n  enabledImperativeSnapping?: boolean;\n\n  onOpenStart?: () => void;\n  onOpenEnd?: () => void;\n  onCloseStart?: () => void;\n  onCloseEnd?: () => void;\n  callbackThreshold?: number;\n  borderRadius?: number;\n};\n\ntype State = {\n  snapPoints: Animated.Value<number>[];\n  init: any;\n  initSnap: number;\n  propsToNewIndices: { [key: string]: number };\n  heightOfContent: Animated.Value<number>;\n  heightOfHeader: number;\n  heightOfHeaderAnimated: Animated.Value<number>;\n};\n\nconst { height: screenHeight } = Dimensions.get('window');\n\nconst P = <T extends any>(android: T, ios: T): T => (Platform.OS === 'ios' ? ios : android);\n\nconst magic = {\n  damping: 50,\n  mass: 0.3,\n  stiffness: 121.6,\n  overshootClamping: true,\n  restSpeedThreshold: 0.3,\n  restDisplacementThreshold: 0.3,\n  deceleration: 0.999,\n  bouncyFactor: 1,\n  velocityFactor: P(1, 0.8),\n  toss: 0.4,\n  coefForTranslatingVelocities: 5,\n};\n\nconst {\n  damping,\n  mass,\n  stiffness,\n  overshootClamping,\n  restSpeedThreshold,\n  restDisplacementThreshold,\n  deceleration,\n  velocityFactor,\n  toss,\n} = magic;\n\nconst {\n  set,\n  cond,\n  onChange,\n  block,\n  eq,\n  greaterOrEq,\n  sqrt,\n  not,\n  defined,\n  max,\n  add,\n  and,\n  Value,\n  spring,\n  or,\n  divide,\n  greaterThan,\n  sub,\n  event,\n  diff,\n  multiply,\n  clockRunning,\n  startClock,\n  stopClock,\n  decay,\n  Clock,\n  lessThan,\n  call,\n  lessOrEq,\n  neq,\n} = Animated;\n\nfunction runDecay(\n  clock: Animated.Clock,\n  value: Animated.Node<number>,\n  velocity: Animated.Node<number>,\n  wasStartedFromBegin: Animated.Value<number>\n) {\n  const state = {\n    finished: new Value(0),\n    velocity: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n  };\n\n  const config = { deceleration };\n\n  return [\n    cond(clockRunning(clock), 0, [\n      cond(wasStartedFromBegin, 0, [\n        set(wasStartedFromBegin, 1),\n        set(state.finished, 0),\n        set(state.velocity, multiply(velocity, velocityFactor)),\n        set(state.position, value),\n        set(state.time, 0),\n        startClock(clock),\n      ]),\n    ]),\n    cond(clockRunning(clock), decay(clock, state, config)),\n    cond(state.finished, stopClock(clock)),\n    state.position,\n  ];\n}\n\nfunction withPreservingAdditiveOffset(drag: Animated.Node<number>, state: Animated.Node<number>) {\n  const prev = new Value(0);\n  const valWithPreservedOffset = new Value(0);\n  return block([\n    cond(\n      eq(state, GestureState.BEGAN),\n      [set(prev, 0)],\n      [set(valWithPreservedOffset, add(valWithPreservedOffset, sub(drag, prev))), set(prev, drag)]\n    ),\n    valWithPreservedOffset,\n  ]);\n}\n\nfunction withDecaying(\n  drag: Animated.Node<number>,\n  state: Animated.Node<number>,\n  decayClock: Animated.Clock,\n  velocity: Animated.Node<number>,\n  prevent: Animated.Value<number>\n) {\n  const valDecayed = new Value(0);\n  const offset = new Value(0);\n  // since there might be moar than one clock\n  const wasStartedFromBegin = new Value(0);\n  return block([\n    cond(\n      eq(state, GestureState.END),\n      [\n        cond(\n          prevent,\n          stopClock(decayClock),\n          set(valDecayed, runDecay(decayClock, add(drag, offset), velocity, wasStartedFromBegin))\n        ),\n      ],\n      [\n        stopClock(decayClock),\n        cond(eq(state, GestureState.BEGAN), set(prevent, 0)),\n        cond(\n          or(eq(state, GestureState.BEGAN), eq(state, GestureState.ACTIVE)),\n          set(wasStartedFromBegin, 0)\n        ),\n        cond(eq(state, GestureState.BEGAN), [set(offset, sub(valDecayed, drag))]),\n        set(valDecayed, add(drag, offset)),\n      ]\n    ),\n    valDecayed,\n  ]);\n}\n\nexport default class BottomSheetBehavior extends React.Component<Props, State> {\n  static defaultProps = {\n    overdragResistanceFactor: 0,\n    initialSnap: 0,\n    enabledImperativeSnapping: true,\n    enabledGestureInteraction: true,\n    enabledBottomClamp: false,\n    enabledBottomInitialAnimation: false,\n    enabledHeaderGestureInteraction: true,\n    enabledContentGestureInteraction: true,\n    enabledContentTapInteraction: true,\n    enabledInnerScrolling: true,\n    springConfig: {},\n    innerGestureHandlerRefs: [React.createRef(), React.createRef(), React.createRef()],\n    callbackThreshold: 0.01,\n  };\n\n  private decayClock = new Clock();\n  private panState = new Value(0);\n  private tapState = new Value(0);\n  private velocity = new Value(0);\n  private panMasterState: Animated.Value<number> = new Value(GestureState.END);\n  private masterVelocity = new Value(0);\n  private isManuallySetValue: Animated.Value<number> = new Value(0);\n  private manuallySetValue = new Value(0);\n  private masterClockForOverscroll = new Clock();\n  private preventDecaying: Animated.Value<number> = new Value(0);\n  private dragMasterY = new Value(0);\n  private dragY = new Value(0);\n  private translateMaster: Animated.Node<number>;\n  private panRef: React.RefObject<PanGestureHandler>;\n  private master: React.RefObject<PanGestureHandler>;\n  private tapRef: React.RefObject<TapGestureHandler>;\n  private snapPoint: Animated.Node<number>;\n  private Y: Animated.Node<number>;\n  private clampingValue: Animated.Value<number> = new Value(0);\n  private onOpenStartValue: Animated.Value<number> = new Value(0);\n  private onOpenEndValue: Animated.Value<number> = new Value(0);\n  private onCloseStartValue: Animated.Value<number> = new Value(1);\n  private onCloseEndValue: Animated.Value<number> = new Value(0);\n\n  private scrollViewRef = React.createRef<ScrollView>();\n  private lastStartScrollY: Animated.Value<number> = new Value(0);\n  private onScrollBeginDrag: ScrollViewProps['onScrollBeginDrag'];\n\n  constructor(props: Props) {\n    super(props);\n\n    this.panRef = props.innerGestureHandlerRefs[0];\n    this.master = props.innerGestureHandlerRefs[1];\n    this.tapRef = props.innerGestureHandlerRefs[2];\n    this.state = BottomSheetBehavior.getDerivedStateFromProps(props, undefined);\n\n    const { snapPoints, init } = this.state;\n    const middlesOfSnapPoints: [Animated.Node<number>, Animated.Node<number>][] = [];\n\n    for (let i = 1; i < snapPoints.length; i++) {\n      const tuple: [Animated.Node<number>, Animated.Node<number>] = [\n        add(snapPoints[i - 1], 10),\n        sub(snapPoints[i], 25),\n      ];\n      middlesOfSnapPoints.push(tuple);\n    }\n\n    const masterOffseted = new Value(init);\n    // destination point is a approximation of movement if finger released\n    const tossForMaster =\n      props.springConfig.hasOwnProperty('toss') && props.springConfig.toss != undefined\n        ? props.springConfig.toss\n        : toss;\n    const destinationPoint = add(masterOffseted, multiply(tossForMaster, this.masterVelocity));\n\n    const positive = greaterOrEq(multiply(tossForMaster, this.masterVelocity), 0);\n    // method for generating condition for finding the nearest snap point\n    const currentSnapPoint = (i = 0): Animated.Node<number> =>\n      i + 1 === snapPoints.length\n        ? snapPoints[i]\n        : cond(\n            positive,\n            cond(\n              greaterThan(destinationPoint, middlesOfSnapPoints[i][0]),\n              cond(\n                lessThan(destinationPoint, middlesOfSnapPoints[i][1]),\n                snapPoints[i + 1],\n                currentSnapPoint(i + 1)\n              ),\n              snapPoints[i]\n            ),\n            cond(\n              greaterThan(destinationPoint, middlesOfSnapPoints[i][1]),\n              cond(\n                lessThan(destinationPoint, middlesOfSnapPoints[i][0]),\n                snapPoints[i + 1],\n                currentSnapPoint(i + 1)\n              ),\n              snapPoints[i]\n            )\n          );\n    // current snap point desired\n    this.snapPoint = currentSnapPoint();\n\n    if (props.enabledBottomClamp) {\n      this.clampingValue.setValue(snapPoints[snapPoints.length - 1]);\n    }\n\n    const masterClock = new Clock();\n    const prevMasterDrag = new Value(0);\n    const wasRun: Animated.Value<number> = new Value(0);\n    this.translateMaster = block([\n      cond(\n        or(\n          eq(this.panMasterState, GestureState.END),\n          eq(this.panMasterState, GestureState.CANCELLED),\n          eq(this.panMasterState, GestureState.FAILED)\n        ),\n        [\n          set(prevMasterDrag, 0),\n          cond(or(clockRunning(masterClock), not(wasRun), this.isManuallySetValue), [\n            cond(this.isManuallySetValue, stopClock(masterClock)),\n            set(\n              masterOffseted,\n              this.runSpring(\n                masterClock,\n                masterOffseted,\n                this.masterVelocity,\n                cond(this.isManuallySetValue, this.manuallySetValue, this.snapPoint),\n                wasRun,\n                this.isManuallySetValue,\n                this.masterVelocity\n              )\n            ),\n            set(this.isManuallySetValue, 0),\n          ]),\n        ],\n        [\n          stopClock(masterClock),\n          set(this.preventDecaying, 1),\n          set(masterOffseted, add(masterOffseted, sub(this.dragMasterY, prevMasterDrag))),\n          set(prevMasterDrag, this.dragMasterY),\n          set(wasRun, 0), // not sure about this move for cond-began\n          cond(\n            eq(this.panMasterState, GestureState.BEGAN),\n            stopClock(this.masterClockForOverscroll)\n          ),\n        ]\n      ),\n      cond(\n        greaterThan(masterOffseted, snapPoints[0]),\n        cond(\n          and(props.enabledBottomClamp ? 1 : 0, greaterThan(masterOffseted, this.clampingValue)),\n          this.clampingValue,\n          masterOffseted\n        ),\n        max(\n          multiply(\n            sub(snapPoints[0], sqrt(add(1, sub(snapPoints[0], masterOffseted)))),\n            !props.enabledInnerScrolling ? props.overdragResistanceFactor : 0\n          ),\n          masterOffseted\n        )\n      ),\n    ]);\n\n    this.Y = add(\n      100,\n      this.withEnhancedLimits(\n        withDecaying(\n          withPreservingAdditiveOffset(this.dragY, this.panState),\n          this.panState,\n          this.decayClock,\n          this.velocity,\n          this.preventDecaying\n        ),\n        masterOffseted\n      )\n    );\n\n    // this.translateY = interpolate(add(translateYOffset, this.dragY, multiply(scrollY, -1)), {\n    //   inputRange: [openPosition, closedPosition],\n    //   outputRange: [openPosition, closedPosition],\n    //   extrapolate: Extrapolate.CLAMP,\n    // });\n\n    this.onScrollBeginDrag = event([\n      {\n        nativeEvent: {\n          contentOffset: { y: this.lastStartScrollY },\n        },\n      },\n    ]);\n  }\n\n  componentDidUpdate(_prevProps: Props, prevState: State) {\n    const { snapPoints } = this.state;\n    if (this.props.enabledBottomClamp && snapPoints !== prevState.snapPoints) {\n      this.clampingValue.setValue(snapPoints[snapPoints.length - 1]);\n    }\n  }\n\n  private runSpring(\n    clock: Animated.Clock,\n    value: Animated.Value<number>,\n    velocity: Animated.Node<number>,\n    dest: Animated.Node<number>,\n    wasRun: Animated.Value<number>,\n    isManuallySet: Animated.Node<number> | number,\n    valueToBeZeroed: Animated.Value<number>\n  ) {\n    const state = {\n      finished: new Value(0),\n      velocity: new Value(0),\n      position: new Value(0),\n      time: new Value(0),\n    };\n\n    const config = {\n      damping,\n      mass,\n      stiffness,\n      overshootClamping,\n      restSpeedThreshold,\n      restDisplacementThreshold,\n      toValue: new Value(0),\n      ...this.props.springConfig,\n    };\n\n    return [\n      cond(clockRunning(clock), 0, [\n        set(state.finished, 0),\n        set(state.velocity, velocity),\n        set(state.position, value),\n        set(config.toValue, dest),\n        cond(and(wasRun, not(isManuallySet)), 0, startClock(clock)),\n        cond(defined(wasRun), set(wasRun, 1)),\n      ]),\n      spring(clock, state, config),\n      cond(state.finished, [stopClock(clock), set(valueToBeZeroed, 0)]),\n      state.position,\n    ];\n  }\n\n  private handleMasterPan = event([\n    {\n      nativeEvent: {\n        translationY: this.dragMasterY,\n        state: this.panMasterState,\n        velocityY: this.masterVelocity,\n      },\n    },\n  ]);\n\n  private handlePan = event([\n    {\n      nativeEvent: {\n        translationY: this.props.enabledInnerScrolling ? this.dragY : this.dragMasterY,\n        state: this.props.enabledInnerScrolling ? this.panState : this.panMasterState,\n        velocityY: this.props.enabledInnerScrolling ? this.velocity : this.masterVelocity,\n      },\n    },\n  ]);\n\n  private handleTap = event([{ nativeEvent: { state: this.tapState } }]);\n\n  private withEnhancedLimits(val: Animated.Node<number>, masterOffseted: Animated.Value<number>) {\n    const wasRunMaster = new Value(0);\n    const min = multiply(-1, add(this.state.heightOfContent, this.state.heightOfHeaderAnimated));\n    const prev = new Value(0);\n    const limitedVal = new Value(0);\n    const diffPres = new Value(0);\n    const flagWasRunSpring = new Value(0);\n    const justEndedIfEnded: Animated.Value<number> = new Value(1);\n    const wasEndedMasterAfterInner: Animated.Value<number> = new Value(1);\n    const prevMaster = new Value(1);\n    const prevState = new Value(0);\n    const rev = new Value(0);\n\n    return block([\n      set(rev, limitedVal),\n      cond(\n        or(\n          eq(this.panState, GestureState.BEGAN),\n          and(eq(this.panState, GestureState.ACTIVE), eq(prevState, GestureState.END))\n        ),\n        [\n          set(prev, val),\n          set(flagWasRunSpring, 0),\n          stopClock(this.masterClockForOverscroll),\n          set(wasRunMaster, 0),\n        ],\n        [\n          set(limitedVal, add(limitedVal, sub(val, prev))),\n          cond(lessThan(limitedVal, min), set(limitedVal, min)),\n        ]\n      ),\n      set(prevState, this.panState), // on iOS sometimes BEGAN event does not trigger\n      set(diffPres, sub(prev, val)),\n      set(prev, val),\n      cond(\n        or(greaterOrEq(limitedVal, 0), greaterThan(masterOffseted, 0)),\n        [\n          cond(\n            eq(this.panState, GestureState.ACTIVE),\n            set(masterOffseted, sub(masterOffseted, diffPres))\n          ),\n          cond(greaterThan(masterOffseted, 0), [set(limitedVal, 0)]),\n          cond(not(eq(this.panState, GestureState.END)), set(justEndedIfEnded, 1)),\n          cond(\n            or(\n              eq(this.panState, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.ACTIVE)\n            ),\n            set(wasEndedMasterAfterInner, 0)\n          ),\n          cond(\n            and(\n              eq(prevMaster, GestureState.ACTIVE),\n              eq(this.panMasterState, GestureState.END),\n              eq(this.panState, GestureState.END)\n            ),\n            set(wasEndedMasterAfterInner, 1)\n          ),\n          set(prevMaster, this.panMasterState),\n          cond(\n            and(\n              eq(this.panState, GestureState.END),\n              not(wasEndedMasterAfterInner),\n              not(eq(this.panMasterState, GestureState.ACTIVE)),\n              not(eq(this.panMasterState, GestureState.BEGAN)),\n              or(clockRunning(this.masterClockForOverscroll), not(wasRunMaster))\n            ),\n            [\n              // cond(justEndedIfEnded, set(this.masterVelocity, diff(val))),\n              set(this.masterVelocity, cond(justEndedIfEnded, diff(val), this.velocity)),\n              set(\n                masterOffseted,\n                this.runSpring(\n                  this.masterClockForOverscroll,\n                  masterOffseted,\n                  diff(val),\n                  this.snapPoint,\n                  wasRunMaster,\n                  0,\n                  this.masterVelocity\n                )\n              ),\n              set(this.masterVelocity, 0),\n            ]\n          ),\n          //   cond(eq(this.panState, State.END), set(wasEndedMasterAfterInner, 0)),\n          cond(eq(this.panState, GestureState.END), set(justEndedIfEnded, 0)),\n          set(this.preventDecaying, 1),\n          0,\n        ],\n        [set(this.preventDecaying, 0), limitedVal]\n      ),\n    ]);\n  }\n\n  snapTo = (index: number) => {\n    if (!this.props.enabledImperativeSnapping) {\n      return;\n    }\n\n    this.isManuallySetValue.setValue(1);\n    this.manuallySetValue.setValue(\n      // @ts-ignore\n      this.state.snapPoints[this.state.propsToNewIndices[index]]\n    );\n  };\n\n  private height: Animated.Value<number> = new Value(0);\n\n  private handleLayoutHeader = ({\n    nativeEvent: {\n      layout: { height: heightOfHeader },\n    },\n  }: LayoutChangeEvent) => {\n    this.state.heightOfHeaderAnimated.setValue(heightOfHeader);\n    this.setState({ heightOfHeader });\n  };\n\n  private handleFullHeader = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) => requestAnimationFrame(() => this.height.setValue(height));\n\n  private handleLayoutContent = ({\n    nativeEvent: {\n      layout: { height },\n    },\n  }: LayoutChangeEvent) => this.state.heightOfContent.setValue(height - this.state.initSnap);\n\n  static renumber = (str: string) => (Number(str.split('%')[0]) * screenHeight) / 100;\n\n  static getDerivedStateFromProps(props: Props, state: State | undefined): State {\n    let snapPoints;\n    const sortedPropsSnapPoints: {\n      val: number;\n      ind: number;\n    }[] = props.snapPoints\n      .map((s: number | string, i: number): {\n        val: number;\n        ind: number;\n      } => {\n        if (typeof s === 'number') {\n          return { val: s, ind: i };\n        } else if (typeof s === 'string') {\n          return { val: BottomSheetBehavior.renumber(s), ind: i };\n        }\n\n        throw new Error(`Invalid type for value ${s}: ${typeof s}`);\n      })\n      .sort(({ val: a }, { val: b }) => b - a);\n    if (state && state.snapPoints) {\n      state.snapPoints.forEach(\n        (s, i) =>\n          // @ts-ignore\n          s.__initialized && s.setValue(sortedPropsSnapPoints[0].val - sortedPropsSnapPoints[i].val)\n      );\n      snapPoints = state.snapPoints;\n    } else {\n      snapPoints = sortedPropsSnapPoints.map(p => new Value(sortedPropsSnapPoints[0].val - p.val));\n    }\n\n    const propsToNewIndices: { [key: string]: number } = {};\n    sortedPropsSnapPoints.forEach(({ ind }, i) => (propsToNewIndices[ind] = i));\n\n    const { initialSnap } = props;\n\n    let init =\n      sortedPropsSnapPoints[0].val - sortedPropsSnapPoints[propsToNewIndices[initialSnap]].val;\n\n    if (props.enabledBottomInitialAnimation) {\n      init =\n        sortedPropsSnapPoints[sortedPropsSnapPoints.length - 1 - propsToNewIndices[initialSnap]]\n          .val;\n    }\n\n    return {\n      init,\n      propsToNewIndices,\n      heightOfHeaderAnimated: (state && state.heightOfHeaderAnimated) || new Value(0),\n      heightOfContent: (state && state.heightOfContent) || new Value(0),\n      initSnap: sortedPropsSnapPoints[0].val,\n      snapPoints,\n      heightOfHeader: (state && state.heightOfHeader) || 0,\n    };\n  }\n\n  render() {\n    const { borderRadius } = this.props;\n    return (\n      <>\n        <Animated.View\n          style={{\n            height: '100%',\n            width: 0,\n            position: 'absolute',\n          }}\n          onLayout={this.handleFullHeader}\n        />\n        <Animated.View\n          style={{\n            width: '100%',\n            position: 'absolute',\n            zIndex: 100,\n            opacity: cond(this.height, 1, 0),\n            transform: [\n              {\n                translateY: this.translateMaster,\n              },\n              {\n                translateY: sub(this.height, this.state.initSnap) as any,\n              },\n            ],\n          }}>\n          <PanGestureHandler\n            enabled={\n              this.props.enabledGestureInteraction && this.props.enabledHeaderGestureInteraction\n            }\n            ref={this.master}\n            waitFor={this.panRef}\n            onGestureEvent={this.handleMasterPan}\n            onHandlerStateChange={this.handleMasterPan}>\n            <Animated.View\n              style={{\n                zIndex: 101,\n              }}\n              onLayout={this.handleLayoutHeader}>\n              {this.props.renderHeader && this.props.renderHeader()}\n            </Animated.View>\n          </PanGestureHandler>\n          <View\n            style={\n              this.props.enabledInnerScrolling && {\n                height: this.state.initSnap - this.state.heightOfHeader,\n                overflow: 'hidden',\n                borderTopLeftRadius: borderRadius,\n                borderTopRightRadius: borderRadius,\n                backgroundColor: 'yellow',\n              }\n            }>\n            <PanGestureHandler\n              enabled={\n                this.props.enabledGestureInteraction && this.props.enabledContentGestureInteraction\n              }\n              waitFor={this.master}\n              ref={this.panRef}\n              onGestureEvent={this.handlePan}\n              onHandlerStateChange={this.handlePan}\n              simultaneousHandlers={[this.scrollViewRef]}>\n              <Animated.View style={{ flex: 1 }}>\n                <TapGestureHandler\n                  ref={this.tapRef}\n                  enabled={\n                    this.props.enabledGestureInteraction &&\n                    this.props.enabledContentGestureInteraction &&\n                    this.props.enabledContentTapInteraction\n                  }\n                  onHandlerStateChange={this.handleTap}>\n                  <Animated.View\n                    style={{\n                      width: '100%',\n                      flex: 1,\n                      transform: [{ translateY: this.Y as any }],\n                    }}\n                    onLayout={this.handleLayoutContent}>\n                    {/* spacer */}\n\n                    <NativeViewGestureHandler\n                      ref={this.scrollViewRef}\n                      simultaneousHandlers={this.panRef}>\n                      <Animated.ScrollView\n                        overScrollMode=\"never\"\n                        bounces={false}\n                        onScrollBeginDrag={this.onScrollBeginDrag}\n                        scrollEventThrottle={1}\n                        contentContainerStyle={{ backgroundColor: 'red' }}>\n                        <View style={{ height: 2000, backgroundColor: 'blue' }}>\n                          <Text>Dupa1</Text>\n                          <Text>Dupa2</Text>\n                          <Text>Dupa3</Text>\n                          <Text>Dupa4</Text>\n                        </View>\n                        {/* {this.props.renderContent && this.props.renderContent()} */}\n                      </Animated.ScrollView>\n                    </NativeViewGestureHandler>\n\n                    {/* spacer */}\n                  </Animated.View>\n                </TapGestureHandler>\n              </Animated.View>\n            </PanGestureHandler>\n            <Animated.Code\n              exec={onChange(\n                this.tapState,\n                cond(eq(this.tapState, GestureState.BEGAN), stopClock(this.decayClock))\n              )}\n            />\n            {this.props.callbackNode && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(\n                    this.props.callbackNode,\n                    divide(\n                      this.translateMaster,\n                      this.state.snapPoints[this.state.snapPoints.length - 1]\n                    )\n                  )\n                )}\n              />\n            )}\n            {(this.props.onOpenStart || this.props.onCloseEnd) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      lessOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[this.state.snapPoints.length - 1]\n                        ),\n                        1 - (this.props.callbackThreshold ? this.props.callbackThreshold : 0.01)\n                      ),\n                      neq(this.onOpenStartValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onOpenStart) this.props.onOpenStart();\n                      }),\n                      set(this.onOpenStartValue, 1),\n                      cond(defined(this.onCloseEndValue), set(this.onCloseEndValue, 0)),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onOpenEnd || this.props.onCloseStart) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      lessOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[this.state.snapPoints.length - 1]\n                        ),\n                        this.props.callbackThreshold ? this.props.callbackThreshold : 0.01\n                      ),\n                      neq(this.onOpenEndValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onOpenEnd) this.props.onOpenEnd();\n                      }),\n                      set(this.onOpenEndValue, 1),\n                      cond(defined(this.onCloseStartValue), set(this.onCloseStartValue, 0)),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onCloseStart || this.props.onOpenEnd) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      greaterOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[this.state.snapPoints.length - 1]\n                        ),\n                        this.props.callbackThreshold ? this.props.callbackThreshold : 0.01\n                      ),\n                      neq(this.onCloseStartValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onCloseStart) this.props.onCloseStart();\n                      }),\n                      set(this.onCloseStartValue, 1),\n                      cond(defined(this.onCloseStartValue), set(this.onOpenEndValue, 0)),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {(this.props.onCloseEnd || this.props.onOpenStart) && (\n              <Animated.Code\n                exec={onChange(this.translateMaster, [\n                  cond(\n                    and(\n                      greaterOrEq(\n                        divide(\n                          this.translateMaster,\n                          this.state.snapPoints[this.state.snapPoints.length - 1]\n                        ),\n                        1 - (this.props.callbackThreshold ? this.props.callbackThreshold : 0.01)\n                      ),\n                      neq(this.onCloseEndValue, 1)\n                    ),\n                    [\n                      call([], () => {\n                        if (this.props.onCloseEnd) this.props.onCloseEnd();\n                      }),\n                      set(this.onCloseEndValue, 1),\n                      cond(defined(this.onOpenStartValue), set(this.onOpenStartValue, 0)),\n                      cond(defined(this.onOpenEndValue), set(this.onOpenEndValue, 0)),\n                    ]\n                  ),\n                ])}\n              />\n            )}\n            {this.props.contentPosition && (\n              <Animated.Code\n                exec={onChange(this.Y, set(this.props.contentPosition, sub(0, this.Y)))}\n              />\n            )}\n            {this.props.headerPosition && (\n              <Animated.Code\n                exec={onChange(\n                  this.translateMaster,\n                  set(this.props.headerPosition, this.translateMaster)\n                )}\n              />\n            )}\n          </View>\n        </Animated.View>\n      </>\n    );\n  }\n}\n"]}